/* =========================================================
   DBH (Detroit Become Human) theme (Vencord).
   Based on: https://github.com/refact0r's Midnight Discord theme.
   Credit: Dani (@CherriRobo).
   ========================================================= */

/* Imports. */
@import url('https://refact0r.github.io/midnight-discord/build/midnight.css');
@import url('https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,300..900;1,300..900&family=Rajdhani:wght@400;600;700&display=swap');

/* Root. */
:root {
  container-name: root;
  --custom-guild-list-padding: 12px;
  --panel-backdrop-filter: none;
  --border-hover: var(--border-subtle);
  --text-1: hsl(195 20% 92%);
  --text-2: hsl(195 16% 82%);
  --text-3: hsl(195 14% 70%);
  --text-4: hsl(195 12% 55%);
  --text-5: hsl(195 10% 45%);
  --bg-1: hsl(210 30% 14%);
  --bg-2: hsl(212 32% 12%);
  --bg-3: hsl(215 35% 10%);
  --bg-4: hsl(218 38% 8%);
  --cy-cyan-3: #00e5ff;
}

/* Body. */
body {
  container-name: body;

  --font: 'Exo 2','Rajdhani','Segoe UI','Helvetica Neue',Arial,sans-serif;
  --code-font: 'Fira Code','JetBrains Mono',monospace;
  font-weight: 400;

  --gap: 12px;
  --divider-thickness: 3px;
  --border-thickness: 1px;

  --animations: on;
  --list-item-transition: 0.18s ease;
  --dms-icon-svg-transition: 0.35s ease;
  --border-hover-transition: 0.18s ease;

  --top-bar-height: 28px;
  --top-bar-button-position: titlebar;
  --top-bar-title-position: left;
  --subtle-top-bar-title: on;
  --custom-window-controls: on;
  --window-control-size: 14px;

  --custom-dms-icon: hide;
  --custom-dms-background: image;
  --dms-background-image-url: url("https://cherrirobo.co.uk/Assets/Other/Cyberlife.png");
  --dms-background-image-size: 80%;

  --background-image: off;
  --background-image-url: url('');

  --transparency-tweaks: off;
  --remove-bg-layer: off;
  --panel-blur: off;
  --blur-amount: 10px;
  --bg-floating: var(--bg-3);

  --custom-chatbar: aligned;
  --chatbar-height: 47px;
  --chatbar-padding: 8px;

  --small-user-panel: on;

  --custom-guild-list-width: calc(var(--guildbar-avatar-size) + var(--custom-guild-list-padding) * 2 + var(--border-thickness) * 2);
  
  --font-primary: var(--font), 'gg sans';
  --font-display: var(--font), 'gg sans';
  --font-code: var(--code-font), 'gg mono';
}

[class*='scroll'] { will-change: scroll-position; }
.burstGlow__23977 { display: none; }

/* Panels/groups. */
.visual-refresh {
  .guilds_c48ade,
  .sidebarList_c48ade,
  .panels_c48ade,
  .chat_f75fb0 > .subtitleContainer_f75fb0,
  .chatContent_f75fb0,
  .container_c8ffbb,
  .content_f75fb0 > .membersWrap_c8ffbb,
  .container__133bf > .container__9293f,
  .container_f391e3 > .container__9293f,
  .homeWrapper__0920e > .container__9293f,
  .container__01ae2 > .container__9293f,
  .container_fb64c9 > .container__9293f,
  .peopleColumn__133bf,
  .nowPlayingColumn__133bf,
  .scroller_c880e8,
  .container_f391e3 > .content_f75fb0,
  .shop__6db1d,
  .content_f75fb0 > .outer_c0bea0,
  .searchResultsWrap_a9e706,
  .container_f369db,
  .chat_fb64c9,
  .container_a592e1,
  .callContainer_cb9592,
  .wrapper_cb9592.sidebarOpen_cb9592 .callContainer_cb9592,
  .callContainer__722ff,
  .chat_f75fb0 > .header_c791b2,
  .chat_f75fb0 > .scrollerBase_d125d2,
  .chat_f75fb0 > .header__0b563,
  .chat_f75fb0 > .container__0b563 {
    background-color: var(--bg-4);
    color: var(--text-1);
    border-radius: var(--radius-lg);
    border: var(--border-thickness) solid var(--border-subtle);
    backdrop-filter: var(--panel-backdrop-filter);
    box-sizing: border-box;
    transition: border-color var(--border-hover-transition);
  }
  .guilds_c48ade:hover,
  .sidebarList_c48ade:hover,
  .panels_c48ade:hover,
  .chat_f75fb0 > .subtitleContainer_f75fb0:hover,
  .chatContent_f75fb0:hover,
  .container_c8ffbb:hover,
  .content_f75fb0 > .membersWrap_c8ffbb:hover { border-color: var(--border-hover); }
}

/* White text. */
:where(.visual-refresh) :where(
  .peopleColumn__133bf,
  .nowPlayingColumn__133bf,
  .scroller_c880e8,
  .shop__6db1d,
  .container_f391e3 > .content_f75fb0,
  .container_f369db,
  .container_a592e1,
  .searchResultsWrap_a9e706
) { color: var(--text-1) !important; }
:where(.visual-refresh) :where(.peopleColumn__133bf, .shop__6db1d, .scroller_c880e8) a,
:where(.visual-refresh) :where(.peopleColumn__133bf, .shop__6db1d, .scroller_c880e8) div,
:where(.visual-refresh) :where(.peopleColumn__133bf, .shop__6db1d, .scroller_c880e8) span { color: var(--text-1) !important; }

/* Chat background. */
:where([class*="chatContent"], [class*="messagesWrapper"]){
  position: relative !important;
  background: transparent !important;
  overflow: visible !important;
}
:where([class*="chatContent"], [class*="messagesWrapper"])::before{
  content:"";
  position:absolute;
  inset:0;
  background-image:url("https://cherrirobo.co.uk/Assets/Other/Background.jpg");
  background-repeat:repeat;
  background-size:auto;
  background-position:top left;
  opacity:.12;
  filter:saturate(.9);
  pointer-events:none;
  z-index:0;
}
:where([class*="scrollerInner"], [class*="scrollerBase"], [class*="chatContent"]) > *{
  position:relative;
  z-index:1;
}

/* Chat bubbles. */
:root{
  --bubble-fill: hsla(210,25%,10%,0.60);
  --bubble-fill-self: hsla(190,100%,50%,0.10);
  --bubble-border: hsla(195,60%,60%,0.08);
  --bubble-border-self: hsla(190,100%,50%,0.14);
}

:where([class*="message"]) > :where([class*="contents"])
  :where([class*="markup"], [class*="messageContent"]):not(:empty){
  display:block !important;
  width:100% !important;
  max-width:none !important;
  box-sizing:border-box !important;
  margin:4px 0 !important;
  padding:10px 16px !important;
  border-radius:14px !important;
  line-height:1.4 !important;
  background:var(--bubble-fill) !important;
  box-shadow:0 0 0 1px var(--bubble-border) inset, 0 6px 16px rgba(0,0,0,.22) !important;
  backdrop-filter:blur(2px) !important;
  color:#fff !important;
  text-align:left !important;
  overflow:hidden !important;
  clear:both !important;
  word-wrap:break-word !important;
}

:where([class*="message"][data-is-author-self="true"]) > :where([class*="contents"])
  :where([class*="markup"], [class*="messageContent"]):not(:empty){
  background:var(--bubble-fill-self) !important;
  box-shadow:0 0 0 1px var(--bubble-border-self) inset, 0 6px 16px rgba(0,229,255,0.10) !important;
}

:where([class*="message"])
  :where([class*="messageAccessories"],
         [class*="embedWrapper"],
         [class*="attachment"],
         [class*="containerMedia"],
         [class*="imageContent"],
         [class*="sticker"],
         [class*="inlineContent"],
         blockquote,
         pre,
         code)
  :where([class*="markup"], [class*="messageContent"]){
  background:transparent !important;
  box-shadow:none !important;
  padding:0 !important;
  margin:0 !important;
  border:0 !important;
}

/* Reply fix. */
:where([class*="repliedMessage"]){
  background:transparent !important;
  box-shadow:none !important;
  border:0 !important;
  padding:0 !important;
  margin:0 0 4px !important;
  border-radius:0 !important;
  backdrop-filter:none !important;
  color:inherit !important;
}
:where([class*="repliedMessage"])::before{ display:revert !important; }
:where([class*="repliedBar"]), :where([class*="spine"]){ display:revert !important; }
:where([class*="repliedMessage"]) :where([class*="username"], [class*="repliedTextPreview"], [class*="messageContent"], [class*="markup"]){
  color:inherit !important;
  -webkit-line-clamp:unset !important;
  display:revert !important;
  padding:0 !important;
  margin:0 !important;
  background:transparent !important;
  box-shadow:none !important;
  border:0 !important;
}

/* Home icon as CyberLife logo. */
@container body style(--custom-dms-icon: hide) {
  .wrapper__6e9f8[data-list-item-id='guildsnav___home'] > .childWrapper__6e9f8 > svg { display: none; }
}
@container body style(--custom-dms-background: image) {
  .wrapper__6e9f8[data-list-item-id='guildsnav___home'] > .childWrapper__6e9f8 {
    background-image: var(--dms-background-image-url);
    background-color: transparent !important;
    background-size: var(--dms-background-image-size);
    background-position: center;
    background-repeat: no-repeat;
  }
}

/* Chatbar fix. */
@container body style(--custom-chatbar: aligned) {
  .visual-refresh {
    .form_f75fb0 {
      margin: 0 var(--chatbar-padding) var(--chatbar-padding) var(--chatbar-padding);
      padding: 0 !important;
      --chatbar-border-color: var(--border-faint);
    }
    .channelTextArea_f75fb0 {
      margin: 0;
      border-color: var(--chatbar-border-color);
      transition: none;
    }
    .base_b88801 {
      top: -24px; left: 0; right: 0;
      background-color: var(--chat-background-default);
      padding: 0 8px;
      border-radius: var(--radius-md) var(--radius-md) 0 0;
      border: 1px solid var(--chatbar-border-color);
      border-bottom: none;
      transition: none;
      box-sizing: border-box;
    }
    .stackedBars__74017, .threadSuggestionBar__841c8 { border-color: var(--chatbar-border-color) !important; }
    .stackedBars__74017 { background: none !important; }
    .form_f75fb0:has(.base_b88801) .channelTextArea_f75fb0,
    .form_f75fb0:has(.base_b88801) .wrapper__44df5 { border-radius: 0 0 var(--radius-md) var(--radius-md); }
  }
}

/* Window controls. */
@container body style(--custom-window-controls: on) {
  .winButtons_c38106 { gap: 0; padding-right: calc(var(--gap) - (var(--window-control-size) / 2) + 1px); }
  .winButtons_c38106::before { margin-right: calc(var(--custom-app-top-bar-height) / 4); }
  .winButton_c38106 > svg { display: none; }
  .winButton_c38106 { background: none !important; width: calc(var(--window-control-size) * 2); height: var(--custom-app-top-bar-height); }
  .winButton_c38106::after { display: block; content: ''; height: var(--window-control-size); width: var(--window-control-size); border-radius: 50%; }
  .winButton_c38106:hover::after { filter: brightness(0.7); }
  .winButton_c38106:active::after { transform: scale(0.9); }
  .winButtonClose_c38106::after { background-color: var(--dnd) !important; }
  .winButtonMinMax_c38106:nth-child(1)::after { background-color: var(--idle) !important; }
  .winButtonMinMax_c38106:nth-child(2)::after { background-color: var(--online) !important; }
}
/* CyberLife logo animations. */
.wrapper__6e9f8[data-list-item-id='guildsnav___home'] > .childWrapper__6e9f8 {
  transition: transform 0.25s ease;
}
.wrapper__6e9f8[data-list-item-id='guildsnav___home']:hover > .childWrapper__6e9f8 {
  transform: scale(1.12);
}
.wrapper__6e9f8[data-list-item-id='guildsnav___home']:active > .childWrapper__6e9f8 {
  animation: cyberlife-pulse 0.3s ease;
}
@keyframes cyberlife-pulse {
  0%   { transform: scale(1.12); }
  50%  { transform: scale(0.92); }
  100% { transform: scale(1.12); }
}